# raspberrypictrl
### 简介
用于在web页面控制和查看树莓派引脚的状态
使用Python3语言编写web服务器和操作GPIO 使用vue编写网页
### 权限
为了便于安装执行,python端没有引用任何第三方的库(所以操作gpio是使用的/sys/class/gpio目录,执行的) 所以必须确保当前用户有这个目录的读写权限
### 启动
1. 下载工程到树莓派内
2. 进入 apps.py所在目录
3. 执行 `python apps.py` 或者`python3 apps.py` 即可  默认端口8080 如需改变端口 可将启动命令改成 `python3 apps.py 端口`  例:  `python3 apps.py 7777` 就改成了7777端口
4. 通过浏览器访问IP:端口 即可  如果是本机直接127.0.0.1:端口

### 使用
* 网页中间是一个GPIO引脚图,两边有操作栏目
* 标识`in` `out` 的开关按钮用于切换引脚的输入输出方向 
* 标识`高` `低` 的开关按钮表示当前引脚的高低电平
* 右上方`清理资源` 按钮会清理掉所有 export出的文件
* `获取所有状态` 按钮用于获取所有的GPIO类型引脚的方向和电平
* `每秒跟踪所有引脚` 按钮开启后会定时跟踪刷新当前网页的引脚状态 注意!!! 这个是在网页开启定时轮询任务,并不是后台程序,所以会有滞后和延迟
### 注意事项
* 这个当前是适配树莓派5的
* 由于刚接触树莓派的GPIO引脚,所以知道的不多,不确定其他引脚的作用,也不知道edge该怎么用,所以目前只有GPIO引脚可以操作和跟踪,其他的如果后续了解之后会加进来
* gpio.py 文件最上面两个数组是引脚的物理编号对应其export文件时候应该填写的数字的映射表(可能是bcm编码,但不全是) 目前只填写了GPIO类型的引脚的映射,其他的填的是0,0代表未知,网页控制时候传递的是物理编码,会通过此数组转换,如果需要可以自己补上去
* 网页限制屏蔽非GPIO引脚按钮的地方为 ./static/views/console/index.js 搜索 `v-if="scope.row[0].type=='GPIO'"` 和 `v-if="scope.row[1].type=='GPIO'"` 删除掉则所有按钮都会出现
